[tox]
envlist = py39, py310, py311, lint, type-check
skip_missing_interpreters = true

[testenv]
deps =
    pytest>=7.4.0
    pytest-cov>=4.1.0
    pytest-mock>=3.11.0
    requests>=2.26.0
commands =
    pytest {posargs}

[testenv:lint]
description = run linters
deps =
    pylint>=2.17.0
    flake8>=6.0.0
    black>=23.7.0
commands =
    black --check src/ tests/
    flake8 src/ tests/
    pylint src/

[testenv:type-check]
description = run type checking with mypy
deps =
    mypy>=1.4.0
    pytest>=7.4.0
commands =
    mypy src/

[testenv:format]
description = format code with black
deps = black>=23.7.0
commands =
    black src/ tests/